#include <stdio.h>
#define N_LEN 300
/*ะะปั ะทะฐะดะฐะฝะฝะพะณะพ ะพัะฝะพัะตะฝะธั ๐ ััะตะฑัะตััั ะพะฟัะตะดะตะปะธัั:
1. ะฏะฒะปัะตััั ะปะธ ๐ ััะฝะบัะธะตะน: โ๐ฅ โ ๐ : (๐ฅ, ๐ข) โ ๐ ะธ (๐ฅ, ๐ฃ) โ ๐ โ ๐ข = ๐ฃ โ ะพััััััะฒัะตั
ะผะฝะพะณะพะทะฝะฐัะฝะพััั.
2. ะฏะฒะปัะตััั ะปะธ ๐ ะฒััะดั ะพะฟัะตะดะตะปัะฝะฝะพะน ััะฝะบัะธะตะน: ๐ ัะฒะปัะตััั ััะฝะบัะธะตะน ะธ โ๐ฅ โ ๐ โ ๐ฆ |
(๐ฅ, ๐ฆ) โ ๐ โ ะทะฝะฐัะตะฝะธะต ะพะฟัะตะดะตะปะตะฝะพ ะฝะฐ ะฒััะผ ะผะฝะพะถะตััะฒะต ๐ .
3. ะฏะฒะปัะตััั ะปะธ ๐ ะธะฝัะตะบัะธะฒะฝะพะน ััะฝะบัะธะตะน: ๐ ัะฒะปัะตััั ััะฝะบัะธะตะน ะธ (๐ฅ, ๐ข) โ ๐ ะธ (๐ฆ, ๐ข) โ ๐
โ ๐ฅ = ๐ฆ.
4. ะฏะฒะปัะตััั ะปะธ ๐ ััััะตะบัะธะฒะฝะพะน ััะฝะบัะธะตะน: ๐ ัะฒะปัะตััั ััะฝะบัะธะตะน ะธ โ๐ข โ ๐ โ ๐ฅ | (๐ฅ, ๐ข) โ ๐.
5. ะฏะฒะปัะตััั ะปะธ ๐ ะฑะธะตะบัะธะฒะฝะพะน ััะฝะบัะธะตะน: ััะฝะบัะธั ๐ ะธ ะธะฝัะตะบัะธะฒะฝะฐ, ะธ ััััะตะบัะธะฒะฝะฐ.*/
int main() {
    int n,m;
    scanf("%d%d", &n,&m);
    int a[N_LEN], b[N_LEN], a_check[300]={0}, b_check[300]={0};
    int flag_iniekt=1, flag_dom=1, flag_suriekt=1;
    for(int i=0; i<m; i++){
        scanf("%d %d", &a[i], &b[i]);
        if(a_check[a[i]-1]){
            printf("0");
            return 0;
        }
        if(b_check[b[i]-1]) flag_iniekt=0;
        a_check[a[i]-1]++;
        b_check[b[i]-1]++;
    }
    printf("1 ");
    for(int i=0; i<n; i++){
        if(a_check[i]==0) flag_dom=0;
        if(b_check[i]==0) flag_suriekt=0;
    }
    if(flag_dom) printf("2 ");
    if(flag_iniekt) printf("3 ");
    if(flag_suriekt){
        printf("4 ");
        if(flag_iniekt && flag_dom) printf("5");
    }
    return 0;
}
